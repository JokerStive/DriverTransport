## tengbo_android

腾博项目Android端


### 什么是组件化
-------------
一般情况下，我们开发一个项目是单一App架构，这种架构下各个业务放在不同的包下，相互依赖类直接调用。
组件化就是将一个app分成多个Module，每个Module都是一个组件(也可以是一个基础库供组件依赖)，
开发的过程中我们可以单独调试部分组件，组件间不需要互相依赖，但可以相互调用，最终发布的时候所有组件以lib的形式被主app工程依赖并打包成一个apk。


### 为什么要采用组件化
-----------------
对于一个小型项目或者项目的前期，单一App架构是很有效率的。但是随着业务的不断增加，每个模块的代码越来越复杂，维护成本越来越高。
而且业务相互之间的依赖也越来越严重，有可能动了一行代码导致很多模块都不能使用，牵一发而动全身。而且新成员加入项目的要熟悉全部的代码，协同开发变得很困难。
而使用组件化呢，每个业务都可以成为一个app，每个组件相互隔离，开发人员只需要关心自己所做的业务组件，完全不用担心自己的代码改动会影响到其他功能，同时每个组件都可以单独调试
使得维护和测试变得很有效率

### 如何组件化
组件化的核心思想是解耦和重用，消除各个业务之间的直接依赖。所以首先要对整个项目做一个层级划分，那些是基础组件，那些是公共组件，那些是业务组件


#### 组件化的难点
------------------------------------------------
1. 组件在**集成模式**和**组件模式**的切换
2. 各个组件maniFest合并的问题
3. library重复依赖的问题
4. 资源文件重名
5. application如何初始化
6. 组件间通信



### 该项目名称解释和组件划分
----------------------------------------------------------
- 组件模式，module以application的方式编译，具有一个完整apk的所有属性。

- 集成模式，module以library的方式编译，该模式下每一个module都是app主工程的依赖库，编译后是一个arr

- app主工程组件：配置组件的依赖，启动页，主页面和各类三方框架的初始化

- 业务组件：根据具体业务，按照一定的粒度把业务拆分成一个一个的组件，业务组件的配置参考module_example。

- 公共组件：该工程各类公用资源组件，所有业务组件都必须依赖此组件。例如base类，公用bean，共有drawable，theme

- 基础组件 ：所有业务必须依赖此组件。网络库，图片加载库，数据存储库，序列化，工具....




### 组件化开发规范
----------------------------------------------------------
1. app主工程组件用来配置主页面，管理各个组件，各种第三方库的初始化

2. 每个业务组件都要依赖公共组件和基础组件,公用资源应该尽量到基础组件和公共组件中。各个业务组件相互隔离，不能有相互依赖。组件间通信（页面跳转，数据传递，实例获取）采用基于事件总线的通信框架CC，参考https://github.com/luckybilly/CC

3. 对业务组件的划分注意粒度，复用性强的业务应该提出来作为单独的组件，比如登陆验证，支付，分享等。前期不熟悉项目的情况下暂时分为：个人信息组件，订单相关组件，异常处理组件，跟，后期可以根据具体实现在进行细化

4. 对每个组件build.gradle的全局配置放在了global_setting.gradle文件中，以apply方式引入，global_settings.gradle的作用如下，详情参考代码

    - 配置module的编译方式library/application,默认是library，如果想要以application方式，需要再local.priority文件中配置**module_name=true**

    - 配置组件在不同模式下的测试代码路径（清单文件，java代码，application都会放到debug文件夹下）

    - 配置app主工程对各个组件的管理

5. 具体的规范可以参考module_example



### CC组件通信框架说明
-------------------------------





